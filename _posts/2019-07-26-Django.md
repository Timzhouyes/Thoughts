---
layout:     post   				    # 使用的布局（不需要改）
title:      Learn Django				# 标题 
subtitle:   Do a Demo on offical guide #副标题
date:       2019-07-26 				# 时间
author:     Haiming 						# 作者
header-img: img/post-bg-2015.jpg 	#这篇文章标题背景图片
catalog: true 						# 是否归档
tags:								#标签
    - 编程
    - Python
    - Django
    - Web
---

Follow the tutorial of official website and do a Demo on Github

# Django at a glance

Here are summaries of what Django is better.

### Design the model

The ORM(Object-relational mapper) can make user describe the database layout in Python code. 

### Dynamic admin interface

Django can automatically create a professional, production ready administrative interface.

So managing the whole system is very easy with Django.

### Design your URLs

By using Python module called URLconf, can design simple mapping between URL patterns and Python callback functions. It can also decouple URLs from Python code.

### Write your views

View is responsible for doing 2 kind of things: one is returning HttpResponse object containing the content fir the requested page, one is raising exception such as Http404.

### Design your templates

Django has a template search path, which can minimize redundancy among templates. 

# Create a virtual environment 

So the virtual environment can let different users use different environments in Django. Each project will differ from each other.

# Writing your first Django app, part 1

## Where should the code live?

It's not a good idea to put any Python code in the Web server's document root because it risks the possibility that people may be able to view the code on Web.

The right way is to put the code in dictionary outside the document root. 

## Each part of `startproject` meaning

The structure is like this one:

```
mysite/
    manage.py
    mysite/
        __init__.py
        settings.py
        urls.py
        wsgi.py
```

Here are meanings of each part:

1. The outer **mysite/** root: Just a directory of the project. The name can be anything you want and doesn't effect Django project.
2. **manage.py**: A command-line utility which lets people interact with Django in various ways. So in my own understanding, it means that the control and management part. 
3. The inner **mysite/** directory is the actual Python package for the project. Name is package name and need to use to import anything inside it. Such as **mysite.urls**
4. `mysite/__init__.py`: Empty file tell Python that the directory should be considered as a Python package. 
5. `mysite/settings.py`: Settings for Django project.
6. `mysite/urls.py`: I think it is a router list for the whole project. 
7. `mysite/wsgi.py`: A WSGI(Python Web Servere Gateway Interface) -compatible web servers to serve the project. Like you can define the response for some requests.

## Start the server

Start server is very easy in Django. After all settings, we can just start it by:

`python manage.py runserver`

And default port is 8000.

If we want to change the port number, we can change the command with parameter and it will be :

`$ python manage.py runserver 8080`

The example will change port to 8080.

If we want to change the port with IP address,such as we want to listen all available public IPs in the part, we can just pass the IP with the port number. Like:

`$ python manage.py runserver 0:8000`

`0` in the above command is abbr. for `0.0.0.0`,So the full format for this part is 

`$ python manage.py runserver 0.0.0.0:8000`

**Tips:**

Each request of the Web for Django, the server will automatically reload all Python code, so in mainly situations we don't need to restart the server if we change some code. But there are really some situations for the Django server to restart, such as adding files, also need to restart the server then it takes effect. 

## Creating the Polls app

In Django ,I think it is "Convention Over Configuration" , and in official documentation it said:

> Each application in Django consists of a Python package that follows a certain convention. Django will generates basic directory structure for an app.

In the official guide, it suggests create directory **polls** which in the same level with `manage.py`.The directory of Polls is like this:

```
polls/
    __init__.py
    admin.py
    apps.py
    migrations/
        __init__.py
    models.py
    tests.py
    views.py
```

