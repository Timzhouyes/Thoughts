---
layout:     post   				    # 使用的布局（不需要改）
title:      学习Angular				# 标题 
subtitle:   官方Tutorial学习 #副标题
date:       2019-05-07				# 时间
author:     Haiming 						# 作者
header-img: img/post-bg-2015.jpg 	#这篇文章标题背景图片
catalog: true 						# 是否归档
tags:								#标签
    - 编程
    - Angular
    - 记录
    - 学习
---

开始学习 Angular 。下面是对于官方教程之中自认为难点或者重点的梳理。

# 快速上手

1. Components are the fundamental building blocks of Angular applications.所以在 Angular 之中，承担功能的基本单位就是 Components。
2. 使用 Angular CLI 创建好项目之后，会默认创建一个 Angular 组件，是 `app-root`， 也叫做根组件。 

# 应用的“外壳”

这一章主要是讲如何修改页面的显示内容和样式。

在 `src/app` 这个文件夹下面有实现 AppComponent 的三个文件：

- app.component.ts : 组件的类代码，使用 TypeScript 写成
- app.component.html : 组件的模板，是使用 HTML 写成
- app.component.css : 组件的**私有** CSS 样式

#### 双花括号语法{{}}

`{{}}` 在 Angular 之中是插值绑定语法，其意为将组件的 title 属性的值绑定在 HTML 的某些标记之中。如下面的代码，就是把值绑定到 <h1> 标签之中

`<h1>{{title}}</h1>`

#### CSS 

在这章教程的CSS之中，可看出其提供的CSS一般包含：

- color
- font-family : 字体
- font- size: 字号



一般都是给某些限定的字体，比如

```css
h1 {
  color: #369;
  font-family: Arial, Helvetica, sans-serif;
  font-size: 250%;
}
```

但是想要在这些标签之外默认字体设置怎么办？用下面的：

```css
/* everywhere else */
* {
  font-family: Arial, Helvetica, sans-serif;
}
```

`*` 就代表了默认的选项。

#### 总结

这一章之后，学会了：

- 使用 Angular CLI 创建初始应用结构
- 使用 Angular 组件显示数据
- 使用{{ }} 来插值。

# 1. 英雄编辑器

在命令行之中使用 `ng generate component heroes` 来新建组件， 名为 heroes。

新建组件之后，可以看到其新建四个文件，除了上面提到的三个，还有一个以`spec.ts` 结尾的测试文件，用于测试。

下面是`heroes.component.ts` 之中的部分代码：

```typescript
@Component({
  selector: 'app-heroes',
  templateUrl: './heroes.component.html',
  styleUrls: ['./heroes.component.css']
})
```

CLI 自动生成了三个元数据属性：

1. selector - 组件的选择器
2. templateUrl - 组件模板文件的位置
3. styleUrls - 组件私有 CSS 样式表文件的位置

其中 `app-heroes` 用来在父组件的模板之中匹配 HTML 元素的名称。也就是说，是用来在其他文件，例如在 `app.component.html` 之中插入的调用名称。

`ngOnInit()` 是一个生命周期钩子，在创建完组件之后就会调用，以完成复杂的初始化过程。

且一定要将这个 class export， 不然其他的地方没法使用。

#### 使用 UppercasePipe 格式化

在 Angular 之中，可以使用 Pipe 表达式来将其格式化。相当于是 pipe 符号左边的数据经过 Pipe 处理之后再流出管道。例如

` <h2>{{hero.name | uppercase}} Details</h2>`

就可以看作是 `hero.name` 经过 `uppercase` 之后其值变为大写再流出。

#### 双向绑定

```html
<div>
  <label>name:
    <input [(ngModel)]="hero.name" placeholder="name">
  </label>
</div>
```

此处使用`ngModel` 可以实现数据的双向绑定，但是不可以直接使用。原因是这个属于 `FormsModule` 下面的模块需要在 `app.module.ts` 之中注册。

首先是：

`import {FormsModule} from '@angular/forms';`

然后在下面的`ngModule` 里面在进行引入：

```typescript
@NgModule({
  declarations: [
    AppComponent,
    HeroesComponent
  ],
  imports: [
    BrowserModule,
    FormsModule
  ],
  providers: [],
  bootstrap: [AppComponent]
})
```

注意其中已经 imports 了这个 Module

# 2. 显示英雄列表

#### *ngFor 列出所有英雄

在<li> 标签之中使用 *ngFor 来列出所有英雄，其作用范围也是 <li> 标签。

```html
<h2>My Heroes</h2>>
<ul class="heroes">
    <li *ngFor="let hero of heroes" (click)="onSelect(hero)" [class.selected]="hero==selectedHero">
        <span class="badge">{{hero.id}}</span>{{hero.name}}
    </li>
</ul>
```

注意此处的 `<ul class="heroes">` 是为了下面的CSS 绑定做铺垫，而 `[class.selected]="hero==selectedHero"` 的作用我们之后再讲。

** 千万不要忘记\*ngFor 之中的\* !! **

