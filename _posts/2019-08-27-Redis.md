---
layout:     post   				    # 使用的布局（不需要改）
title:      Redis浅析				# 标题 
subtitle:   对Redis的概念和用法的简析 #副标题
date:       2019-08-27 				# 时间
author:     Haiming 						# 作者
header-img: img/post-bg-2015.jpg 	#这篇文章标题背景图片
catalog: true 						# 是否归档
tags:								#标签
    - 编程
    - Redis
    - Web
---

参考资料：
为什么我们做分布式使用 Redis ？ - 程序之心 丁仪的文章 - 知乎
https://zhuanlan.zhihu.com/p/50392209

# 1.为什么要使用redis
在项目之中使用redis，主要的考虑角度是性能和并发。
### 性能
由于在数据库之中查询数据是一项特别耗费资源的活动，因此遇到结果不会频繁变动的SQL，适合将结果直接放到缓存。
### 并发
在大并发的情况下，数据库直接处理所有请求会出现连接异常。这时候就使用Redis做一个缓冲操作，让请求先访问到Redis，再访问数据库。
### 使用Redis的常见问题
- 缓存和数据库双写一致性问题
- 缓存雪崩问题
- 缓存击穿问题
- 缓存的并发竞争问题

# 2. Redis简介
首先上定义：Redis是一个高性能的key-value数据库。
相比于其他产品，Redis有三个特点：
- Redis支持数据的持久化，可以将内存之中数据保存在磁盘之中，重启可以加载再使用。
- Redis不仅仅支持简单的key-value，还提供 list，set，zset，hash等结构存储。
- Redis支持数据的备份，即master-slave格式的备份。

# 3. Redis优势
- 性能高：读速度是110000次/s， 写速度是81000次/s
- 原子： Redis所有操作均为原子性

Redis和其他key-value产品不同在哪？
Redis可以将内存之中的数据不断存放在硬盘之中，我认为这一点设计极其精巧，因为内存的存取结构远比硬盘简单，而且在向硬盘上面追加数据的时候，是顺序写，可以最大限度的提高性能。

# 4.一些配置文件：
http://www.runoob.com/redis/redis-conf.html

1. `vm-page-size 32` ： Redis swap 文件分成了很多的page，一个Object可以保存在多个page上面，但是一个page不可以被多个Object共享，这一项是根据存储的数据大小来设定的，若存储很多小对象，page大小最好设置32或者64bytes，存储很大的对象，可以用更大的page。
2. `vm-max-memory 0`: 将所有大于 vm-max-memory 的数据写入虚拟内存，无论 vm-max-memory 设置多小。所有索引数据都是内存存储的，也就是说当vm-max-memory设置为0，就是所有value存储到磁盘。默认为0.
3. `maxmemory <bytes>`: 指定Redis的最大内存限制。